# ==========================================
# SCHEELS Arc'teryx 商品监控系统配置文件
# ==========================================
# 使用方法：
# 1. 复制此文件为 config.yaml
# 2. 填入你的QQ邮箱配置
# 3. 启动程序

# 监控配置
monitor:
  # 目标URL
  url: "https://www.scheels.com/c/all/b/arc'teryx/?redirect=arcteryx"
  # 检测间隔（分钟）
  interval_minutes: 10
  # 请求超时（秒）- 加载全部商品可能需要较长时间
  timeout_seconds: 180
  # 失败重试次数
  retry_times: 3
  # 重试间隔（秒）
  retry_interval: 10
  # 是否无头模式运行浏览器
  headless: true

# 邮件配置（QQ邮箱）
email:
  # 是否启用邮件通知
  enabled: true
  # SMTP服务器
  smtp_server: "smtp.qq.com"
  # SMTP端口（SSL）
  smtp_port: 465
  # 发件人邮箱
  sender: "841466403@qq.com"
  # QQ邮箱授权码（非QQ密码，需要在QQ邮箱设置中获取）
  password: "ywrqxlmxgwwxbbcj"
  # 收件人邮箱（可以和发件人相同）
  receiver: "564151906@qq.com"

# 通知设置
notification:
  # 商品增加时通知
  notify_on_added: true
  # 商品减少时通知
  notify_on_removed: true
  # 程序异常时通知（已禁用）
  notify_on_error: false

# Web服务配置
web:
  # 主机地址（Docker中需要设置为0.0.0.0）
  host: "0.0.0.0"
  # 端口
  port: 7080
  # 是否开启调试模式
  debug: false
  # 允许的跨域来源
  cors_origins:
    - "http://localhost:5173"
    - "http://127.0.0.1:5173"

# 数据库配置
database:
  # SQLite数据库路径（相对于项目根目录）
  path: "data/monitor.db"
  # 自动备份
  auto_backup: true
  # 备份保留天数
  backup_retention_days: 30

# 日志配置
logging:
  # 日志级别：DEBUG/INFO/WARNING/ERROR
  level: "INFO"
  # 日志文件路径（相对于项目根目录）
  file: "logs/monitor.log"
  # 单个日志文件最大大小（MB）
  max_size_mb: 10
  # 保留日志文件数量
  backup_count: 5
  # 是否输出到控制台
  console: true

# 站点模板配置（用于智能URL解析）
sites:
  arcteryx_us:
    name: "Arc'teryx US"
    domain: "arcteryx.com"
    url_templates:
      mens: "https://arcteryx.com/us/en/shop/mens/{key}"
      womens: "https://arcteryx.com/us/en/shop/womens/{key}"
    default_category: "mens"
    categories:
      - value: "mens"
        label: "Men's"
      - value: "womens"
        label: "Women's"
    # URL解析正则（从完整URL提取分类和Key）
    url_parse_pattern: "/shop/(mens|womens)/([a-z0-9-]+)"
    # Key验证正则
    key_pattern: "^[a-z0-9-]+-\\d+$"
    key_example: "beta-sl-jacket-9685"

  scheels:
    name: "SCHEELS"
    domain: "scheels.com"
    url_templates:
      default: "https://www.scheels.com/p/{key}"
    default_category: "default"
    categories: []
    # URL解析正则（忽略queryID参数）
    url_parse_pattern: "/p/(\\d+)"
    # Key验证正则（8位以上数字）
    key_pattern: "^\\d{8,}$"
    key_example: "62355529822"
