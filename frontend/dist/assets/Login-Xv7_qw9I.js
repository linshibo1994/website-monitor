import{u as C,r as u,c as U,o as q,a as i,b as o,w as l,d as n,e as B,f as g,m as E,g as I,h as N,l as P,i as x,E as m}from"./index-BaHTuV22.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"login-container"},W={class:"login-card"},j={class:"login-header"},D={class:"logo-icon"},G={__name:"Login",setup(H){const v=B(),{login:T,loginWithToken:R}=C(),k=u("password"),r=u(!1),p=u(null),c=u(null),s=u({username:"",password:""}),d=u({token:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},F={token:[{required:!0,message:"请输入 API Token",trigger:"blur"}]},w=async()=>{if(p.value)try{await p.value.validate(),r.value=!0;const a=await T(s.value.username,s.value.password);a.success?(m.success("登录成功"),v.push("/")):m.error(a.message||"登录失败")}catch(a){console.error("Login validation failed:",a)}finally{r.value=!1}},z=async()=>{if(c.value)try{await c.value.validate(),r.value=!0;const a=await R(d.value.token);a.success?(m.success("登录成功"),v.push("/")):m.error(a.message||"登录失败")}catch(a){console.error("Token login validation failed:",a)}finally{r.value=!1}};return(a,e)=>{const L=n("el-icon"),f=n("el-input"),_=n("el-form-item"),b=n("el-button"),y=n("el-form"),V=n("el-tab-pane"),A=n("el-tabs");return q(),U("div",M,[i("div",W,[i("div",j,[i("div",D,[o(L,null,{default:l(()=>[o(g(E))]),_:1})]),e[4]||(e[4]=i("h1",{class:"title"},"Arc'teryx Monitor",-1)),e[5]||(e[5]=i("p",{class:"subtitle"},"商品监控系统",-1))]),o(A,{modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=t=>k.value=t),class:"login-tabs"},{default:l(()=>[o(V,{label:"密码登录",name:"password"},{default:l(()=>[o(y,{ref_key:"passwordFormRef",ref:p,model:s.value,rules:h,class:"login-form"},{default:l(()=>[o(_,{prop:"username"},{default:l(()=>[o(f,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.username=t),placeholder:"用户名",size:"large","prefix-icon":g(I),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),o(_,{prop:"password"},{default:l(()=>[o(f,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.password=t),type:"password",placeholder:"密码",size:"large","prefix-icon":g(P),"show-password":"",onKeyup:N(w,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(b,{type:"primary",size:"large",class:"login-button",loading:r.value,onClick:w},{default:l(()=>[...e[6]||(e[6]=[x(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1}),o(V,{label:"Token登录",name:"token"},{default:l(()=>[o(y,{ref_key:"tokenFormRef",ref:c,model:d.value,rules:F,class:"login-form"},{default:l(()=>[o(_,{prop:"token"},{default:l(()=>[o(f,{modelValue:d.value.token,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value.token=t),type:"textarea",placeholder:"请输入 API Token",rows:4,resize:"none",clearable:""},null,8,["modelValue"])]),_:1}),o(b,{type:"primary",size:"large",class:"login-button",loading:r.value,onClick:z},{default:l(()=>[...e[7]||(e[7]=[x(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])])}}},Q=K(G,[["__scopeId","data-v-a23636a5"]]);export{Q as default};
